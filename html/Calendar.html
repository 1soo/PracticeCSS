<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Calendar</title>
    <style>
        h2
        {
            text-align: center;
            font-size: 200%;
        }
        h6
        {
            visibility: hidden;
        }
        button
        {
            position: relative;
            width: 200px;
            border: 1px solid;
            font-size: 120%;
        }
        div
        {
            float: left;
            height : 150%;
            color: #FFFFE0;
            background-color: #262829;
            border-radius: 5px;
            box-sizing: border-box;
            text-align: center;
        }
        ul
        {
            list-style-type: none;
            margin-right: 40px;
            border-collapse: collapse;
        }
        li
        {
            display: inline-block;
            border: 2px solid #D3D3D3;
            width : 80px;
            padding: 10px;
            background-color: #101010;
            border-radius: 10px;
            box-sizing: border-box;
        }
        li:active, li:checked
        {
            border: 1px solid #000000;
            background-color: #FFFFE0;
            color: #151515;
        }
        .li_Weekday
        {
            font-size: 125%;
            pointer-events: none;
        }
        .li_Saturday
        {
            background-color: #1E90FF;
        }
        .li_Sunday
        {
            background-color: #DB7093;
        }
        .li_Content
        {
            display: none;
            position: absolute;
            z-index: 1;
        }
        .button_NextPrevMonth
        {
            background-color: #5a5a5a;
            color: #D3D3D3;
        }
        .button_NextPrevMonth:hover
        {
            background-color: #FFFFE0;
            color: #262829;
        }
        .button_NowMonth
        {
            color: #FFFFE0;
            background-color: #262829;
        }
        .div_ToDo
        {
            width: 300px;
            margin-top: 125px;
            margin-left: 10px;
        }
        .div_Calendar
        {
            width: 660px;
            display: inline-block;
        }
        .input_Submit
        {
            margin-top: 5px;
            background-color: #7FFF00;
        }
        .input_Submit:hover
        {
            background-color: #006400;
            color: #FFFFE0;
        }
        .clear
        {
            clear: both;
        }
    </style>
</head>
<body>

<div class="div_Calendar">
    <h2 id="printYearNMonth"></h2>
    <p id="printButton"></p>
    <p id="printWeekArray"></p>
    <p id="printDate"></p>
</div>

<div class="div_ToDo">

    <p id="Today_Date" style="font-size:300%; margin-bottom:0"></p>
    <p id="Today_Day" style="font-size:200%; margin-top: 0"></p>

    <form method = "post">
        <label for="Time">Time</label>
        <input type="text" id="Time" name="Time"><br>

        <label for="Place">Place</label>
        <input type="text" id="Place" name="Place"><br>

        <label for="To_Do">To_Do</label>
        <input type="text" id="To_Do" name="To_Do"><br>

        <input type="submit" class="input_Submit" Value="Submit">
    </form>
</div>
<script>

    // 현재 날짜
    let nowDate = new Date();

    printToday();
    printButton();
    printWeekArray();
    printDates();

    // To-Do에서 날짜와 요일 출력하는 함수
    function printToday()
    {
        let WeekdayArr = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

        document.getElementById("Today_Date").innerHTML = (nowDate.getMonth()+1).toString() + "_" + nowDate.getDate().toString();
        document.getElementById("Today_Day").innerHTML = WeekdayArr[nowDate.getDay()];
    }
    // 마우스로 달력의 날짜를 클릭하면 ToDo창의 날짜를 그 날짜로 변경하는 함수
    function Change_ToDoDate(obj)
    {
        let WeekdayArr = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            selected_Date = new Date(nowDate.getFullYear(), nowDate.getMonth(), obj.innerHTML);

        document.getElementById("Today_Date").innerHTML = (selected_Date.getMonth() + 1) + "_" + selected_Date.getDate();
        document.getElementById("Today_Day").innerHTML = WeekdayArr[selected_Date.getDay()];
    }
    // 버튼 출력 함수
    function printButton()
    {
        let buttonClassList = ["button_NextPrevMonth", "button_NowMonth", "button_NextPrevMonth"],
            buttonNameList = ["PrevMonth", "NowMonth", "NextMonth"],
            html = "";
        for(let i = 0; i <= 2; i++)
        {
            html += `<button onclick=printDates(${i-1}) class = ${buttonClassList[i]}>${buttonNameList[i]}</button>`;
        }
        document.getElementById("printButton").innerHTML = html;
    }
    // 요일 출력 함수(개별로 li 생성하는 거랑 for문으로 li생성하는 거랑 간격이 다른듯함)
    function printWeekArray()
    {
        // 요일 : 0~6 (일~토)
        let WeekdayArr = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            html = "<ul>";
        for(let i = 0; i < 7; i++)
        {
            html += `<li class="li_Weekday">&nbsp${WeekdayArr[i]}&nbsp</li>`;
        }
        html += "</ul>";
        document.getElementById("printWeekArray").innerHTML = html;
    }
    // 일 출력 함수
    function printDates(num = 0)
    {
        // 1일로 설정
        nowDate.setDate(1);

        // 월 설정 ( 이전 달 or 현재 달 or 다음 달)
        nowDate.setMonth(nowDate.getMonth() + num);

        // 현재 연도와 월
        let year = nowDate.getFullYear(),
            // 월 : 0~11 (1월~12월) => 밑의 month 연산에서 (month + 1)을 넣어야 함.
            month = nowDate.getMonth(),

            // 월의 마지막 날
            lastDay = new Date(year, (month + 1), 0).getDate(),

            // 월의 첫 날짜 요일
            firstWeekDay = nowDate.getDay(),

            // 월의 마지막 날 요일
            nextMonthFirstWeekDay = new Date(year, month + 1, 0).getDay(),

            // nextline 넣는 계산용 요일
             weekDay = nowDate.getDay(),

            // 출력용 변수
            html = `<ul>`;

        document.getElementById("printYearNMonth").innerHTML = year + " - " + (month + 1);


        for(let i = -firstWeekDay; i < lastDay + (6 - nextMonthFirstWeekDay); i++)  // 6 - 담 달 첫 요일 = 달력 뒤 여백 채우는 수
        {
            // 월의 첫 날 앞 여백을 -으로 채우기
            if(i < 0)
            {
                html += `<li>&nbsp</li>`;
            }
            else if(i < lastDay)
            {
                html += "<li";
                if(weekDay == 6)
                {
                    html += ' class="li_Saturday"';
                }
                else if(weekDay == 0)
                {
                    html += ' class="li_Sunday"';
                }
                html += ` onclick= "Change_ToDoDate(this)">${i + 1}</li>`;
                // 토요일인 날짜에 </ul><ul>추가
                weekDay++;
                if(weekDay == 7)
                {
                    weekDay = 0;
                    html += "</ul><ul>"
                }
            }
            else
            {
                html += `<li>&nbsp</li>`;
            }
        }

        html += `</ul>`;

        document.getElementById("printDate").innerHTML = html;
    }


</script>

</body>
</html>